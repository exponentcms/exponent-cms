!function t(e,a,s){function r(i,o){if(!a[i]){if(!e[i]){var d="function"==typeof require&&require;if(!o&&d)return d(i,!0);if(n)return n(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var g=a[i]={exports:{}};e[i][0].call(g.exports,function(t){var a=e[i][1][t];return r(a?a:t)},g,g.exports,t,e,a,s)}return a[i].exports}for(var n="function"==typeof require&&require,i=0;i<s.length;i++)r(s[i]);return r}({1:[function(t,e,a){"use strict";Object.assign(mejs.MepDefaults,{vastAdTagUrl:""}),Object.assign(MediaElementPlayer.prototype,{vastAdTagIsLoading:!1,vastAdTagIsLoaded:!1,vastStartedPlaying:!1,vastAdTags:[],buildvast:function(t,e,a,s){var r=this;r.isVideo&&(""!==r.options.vastAdTagUrl&&r.vastLoadAdTagInfo(),r.buildads(t,e,a,s),r.vastSetupEvents())},vastSetupEvents:function(){var t=this;t.container.addEventListener("mejsprerollstarted",function(){if(t.vastAdTags.length>0){var e=t.vastAdTags[0];if(e.trackingEvents.start&&t.adsLoadUrl(e.trackingEvents.start),!e.shown&&e.impressions.length>0)for(var a=0,s=e.impressions.length;a<s;a++)t.adsLoadUrl(e.impressions[a]);e.shown=!0}}),t.container.addEventListener("mejsprerollended",function(){t.vastAdTags.length>0&&t.options.indexPreroll<t.vastAdTags.length&&t.vastAdTags[t.options.indexPreroll].trackingEvents.complete&&t.adsLoadUrl(t.vastAdTags[t.options.indexPreroll].trackingEvents.complete)})},vastSetAdTagUrl:function(t){var e=this;e.options.vastAdTagUrl=t,e.options.indexPreroll=0,e.vastAdTagIsLoaded=!1,e.vastAdTags=[]},vastLoadAdTagInfo:function(){var t=this;t.adsDataIsLoading=!0,t.vastAdTagIsLoading=!0,t.loadAdTagInfoDirect()},loadAdTagInfoDirect:function(){var t=this;mejs.Utils.ajax(t.options.vastAdTagUrl,"xml",function(e){t.vastParseVastData(e)},function(e){t.loadAdTagInfoProxy()})},loadAdTagInfoProxy:function(){var t=this,e=location.protocol,a='select * from xml where url="'+encodeURI(t.options.vastAdTagUrl)+'"',s="http"+(/^https/.test(e)?"s":"")+"://query.yahooapis.com/v1/public/yql?format=xml&q="+a;mejs.Utils.ajax(s,"xml",function(e){t.vastParseVastData(e)},function(t){})},vastParseVastData:function(t){var e=this;e.vastAdTags=[],e.options.indexPreroll=0;for(var a=new DOMParser,s=a.parseFromString(t,"text/xml"),r=s.getElementsByTagName("Ad"),n=0,i=r.length;n<i;n++){var o=r[n],d={id:o.getAttribute("id"),title:o.getElementsByTagName("AdTitle")[0].textContent.trim(),description:o.getElementsByTagName("Description")[0].textContent.trim(),impressions:[],clickThrough:o.getElementsByTagName("ClickThrough")[0].textContent.trim(),mediaFiles:[],trackingEvents:{},shown:!1},l=o.getElementsByTagName("Impression"),g=o.getElementsByTagName("MediaFile"),v=o.getElementsByTagName("Tracking");e.vastAdTags.push(d);for(var u=0,c=l.length;u<c;u++)d.impressions.push(l[u].textContent.trim());for(var m=0,p=v.length;m<p;m++){var f=v[m];d.trackingEvents[f.getAttribute("event")]=f.textContent.trim()}for(var T=0,h=g.length;T<h;T++){var A=g[T],y=A.getAttribute("type");""===e.media.canPlayType(y)&&null!==e.media.canPlayType(y).match(/(no|false)/)||d.mediaFiles.push({id:A.getAttribute("id"),delivery:A.getAttribute("delivery"),type:A.getAttribute("type"),bitrate:A.getAttribute("bitrate"),width:A.getAttribute("width"),height:A.getAttribute("height"),url:A.textContent.trim()})}}e.vastLoaded()},vastLoaded:function(){var t=this;t.vastAdTagIsLoaded=!0,t.vastAdTagIsLoading=!1,t.adsDataIsLoading=!1,t.vastStartPreroll()},vastStartPreroll:function(){for(var t=this,e=0;e<t.vastAdTags.length;)t.options.adsPrerollMediaUrl[e]=t.vastAdTags[e].mediaFiles[0].url,t.options.adsPrerollAdUrl[e]=t.vastAdTags[e].clickThrough,e++;t.adsStartPreroll()}})},{}]},{},[1]);
