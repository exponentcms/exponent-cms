!function t(a,s,r){function e(n,o){if(!s[n]){if(!a[n]){var d="function"==typeof require&&require;if(!o&&d)return d(n,!0);if(i)return i(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var c=s[n]={exports:{}};a[n][0].call(c.exports,function(t){var s=a[n][1][t];return e(s?s:t)},c,c.exports,t,a,s,r)}return s[n].exports}for(var i="function"==typeof require&&require,n=0;n<r.length;n++)e(r[n]);return e}({1:[function(t,a,s){"use strict";Object.assign(mejs.MepDefaults,{vastAdTagUrl:""}),Object.assign(MediaElementPlayer.prototype,{vastAdTagIsLoading:!1,vastAdTagIsLoaded:!1,vastStartedPlaying:!1,vastAdTags:[],buildvast:function(t,a,s,r){var e=this;""!==e.options.vastAdTagUrl&&e.vastLoadAdTagInfo(),e.buildads(t,a,s,r),e.vastSetupEvents()},vastSetupEvents:function(){var t=this;t.container.on("mejsprerollstarted",function(){if(t.vastAdTags.length>0){var a=t.vastAdTags[0];if(a.trackingEvents.start&&t.adsLoadUrl(a.trackingEvents.start),!a.shown&&a.impressions.length>0)for(var s=0,r=a.impressions.length;s<r;s++)t.adsLoadUrl(a.impressions[s]);a.shown=!0}}),t.container.on("mejsprerollended",function(){t.vastAdTags.length>0&&t.options.indexPreroll<t.vastAdTags.length&&t.vastAdTags[t.options.indexPreroll].trackingEvents.complete&&t.adsLoadUrl(t.vastAdTags[t.options.indexPreroll].trackingEvents.complete)})},vastSetAdTagUrl:function(t){var a=this;a.options.vastAdTagUrl=t,a.options.indexPreroll=0,a.vastAdTagIsLoaded=!1,a.vastAdTags=[]},vastLoadAdTagInfo:function(){var t=this;t.adsDataIsLoading=!0,t.vastAdTagIsLoading=!0,t.loadAdTagInfoDirect()},loadAdTagInfoDirect:function(){var t=this;$.ajax({url:t.options.vastAdTagUrl,crossDomain:!0,success:function(a){t.vastParseVastData(a)},error:function(a){t.loadAdTagInfoProxy()}})},loadAdTagInfoProxy:function(){var t=this,a=location.protocol,s='select * from xml where url="'+encodeURI(t.options.vastAdTagUrl)+'"',r="http"+(/^https/.test(a)?"s":"")+"://query.yahooapis.com/v1/public/yql?format=xml&q="+s;$.ajax({url:r,crossDomain:!0,success:function(a){t.vastParseVastData(a)},error:function(t){}})},vastParseVastData:function(t){var a=this;a.vastAdTags=[],a.options.indexPreroll=0,$(t).find("Ad").each(function(t,s){var r=$(s),e={id:r.attr("id"),title:$.trim(r.find("AdTitle").text()),description:$.trim(r.find("Description").text()),impressions:[],clickThrough:$.trim(r.find("ClickThrough").text()),mediaFiles:[],trackingEvents:{},shown:!1};a.vastAdTags.push(e),r.find("Impression").each(function(){e.impressions.push($.trim($(this).text()))}),r.find("Tracking").each(function(t,a){var s=$(a);e.trackingEvents[s.attr("event")]=$.trim(s.text())}),r.find("MediaFile").each(function(t,s){var r=$(s),i=r.attr("type");""!==a.media.canPlayType(i).toString().replace(/no/,"").replace(/false/,"")&&e.mediaFiles.push({id:r.attr("id"),delivery:r.attr("delivery"),type:r.attr("type"),bitrate:r.attr("bitrate"),width:r.attr("width"),height:r.attr("height"),url:$.trim(r.text())})})}),a.vastLoaded()},vastLoaded:function(){var t=this;t.vastAdTagIsLoaded=!0,t.vastAdTagIsLoading=!1,t.adsDataIsLoading=!1,t.vastStartPreroll()},vastStartPreroll:function(){for(var t=this,a=0;a<t.vastAdTags.length;)t.options.adsPrerollMediaUrl[a]=t.vastAdTags[a].mediaFiles[0].url,t.options.adsPrerollAdUrl[a]=t.vastAdTags[a].clickThrough,a++;t.adsStartPreroll()}})},{}]},{},[1]);
